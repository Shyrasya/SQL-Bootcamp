# Day07

Учимся работать с агрегированием баз данных на базе OLAP-конструкций для повышения информативности. В этом дне используется обновленная база данных, основанная на 7-13 заданиях 3 дня и 7 задании 4 дня, которая прикреплена в папке materials.

## О заданиях

1. [Exercise 00](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex00) - выборка, которая возвращает идентификаторы людей и соответствующее количество посещений в любой пиццерии и сортирует по количеству посещений по убыванию и сортирует по person_id по возрастанию;

2. [Exercise 01](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex01) - модификация запроса из Exercise 00, возвращающая имя человека. Дополнительное условие: нужно увидеть только топ-4 людей с максимальным количеством посещений в каждой пиццерии, отсортированные по имени;

3. [Exercise 02](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex02) - выборка, выводящая 3 любимых ресторана по посещениям и заказам. Добавлен новый столбец "action_type" со значениями "order" или "visit", в зависимости от данных. Результат отсортирован в порядке возрастания по столбцу "action_type" и в порядке убывания по столбцу "count";

4. [Exercise 03](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex03) - выборка-группировка ресторанов по посещениям и заказам, объединенные по названию ресторана. Может быть использован внутренний запрос из Exercise 02 (рестораны по посещениям и по заказам), без ограничений на количество строк. Применяются следующие правила:
	* вычисление суммы заказов и посещений для соответствующей пиццерии (не все ключи пиццерий представлены в обеих таблицах);
	* сортировка результатов по столбцу "total_count" в порядке убывания и по столбцу "name" в порядке возрастания;

5. [Exercise 04](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex04) - выборка, содержащая имя человека и соответствующее число визитов в любые пиццерии, если человек посетил ее более 3 раз. Запрещено использование **"WHERE"**;

6. [Exercise 05](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex05) - выборка со списком уникальными именами людей, которые сделали заказ в любой пиццерии. Результат отсортирован по имени человека. Запрещено использование: **"GROUP BY"**, любого **"UNION"**, работа с сетами;

7. [Exercise 06](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex06) - выборка с количеством заказов, средней ценой, максимальной и минимальной ценой за пиццу, продаваемой в каждой пиццерии. Отсортировано по имени пиццерии. Округление средней цены произведено до двух плавающих знаков;

8. [Exercise 07](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex07) - выборка, возвращающая общий средний рейтинг "global_rating" для всех ресторанов. Округление рейтинга до 4 плавающих знаков;

9. [Exercise 08](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex08) - результирующая выборка по городам, пиццериям и количеству сделанных заказов, отсортированная по адресу и имени пиццерии;

9. [Exercise 09](https://github.com/Shyrasya/SQL-Bootcamp/tree/main/SQL_beginner.Day07/src/ex09) - агрегирующая информация о городе, результате, вычисленном по формуле: "средний возраст - (минимальный возраст / максимальный возраст)" представленный в столбце "formula". Также представлены столбцы средний возраст по адресу и столбец "comparison" (сравнение значений между "formula" и "average": если значение по формуле больше, то выводится True, иначе False). Результат отсортирован по адресу. 